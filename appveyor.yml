version: 1.0.{build}

image: Visual Studio 2015

# Install pester module and init the Appveyor support.
install:
  - cinst pester
  - ps: Import-Module .\tools\AppVeyor.psm1


build: false

build_script:
  - ps: Invoke-AppveyorBuild

test_script:
  - ps: Invoke-AppVeyorTests

  - provider: GitHub
    artifact: myapp.zip           # upload all NuGet packages to release assets
    draft: false
    prerelease: false
    on:
      branch: master                # release from master branch only
      appveyor_repo_tag: true       # deploy on tag push only
